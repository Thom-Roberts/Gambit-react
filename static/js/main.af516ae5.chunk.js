(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,n){e.exports=n(376)},179:function(e,t){},181:function(e,t){},213:function(e,t){},214:function(e,t){},283:function(e,t){},373:function(e,t){(e.exports={}).BUNGIEAPIKEY="7771c372dbe34060a7bbb10b3016ecfe"},374:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n.n(r),c=n(27),s="https://www.bungie.net/Platform/",i=function(e,t,n){return"/Destiny2/".concat(t,"/Account/").concat(e,"/Character/").concat(n,"/Stats/Activities/?mode=64")},u=function(e){return"/Destiny2/Stats/PostGameCarnageReport/".concat(e,"/")},o=n(50).SendRequest;function p(){return(p=Object(c.a)(a.a.mark(function e(t,n,r){var c,i,p,h,m,f,d,b,v,y,w;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=r.map(function(e){return l(t,n,e)}),e.next=4,Promise.all(c);case 4:c=e.sent,i=c.map(function(e){return e.Response.activities.map(function(e){return e.activityDetails.instanceId})}),p=i.map(function(e){return e.map(function(e){return o(s+u(e))})}),h=[],m=!0,f=!1,d=void 0,e.prev=12,b=p[Symbol.iterator]();case 14:if(m=(v=b.next()).done){e.next=23;break}return y=v.value,e.next=18,Promise.all(y);case 18:w=e.sent,h.push(w.map(function(e){return e.Response}));case 20:m=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),f=!0,d=e.t0;case 29:e.prev=29,e.prev=30,m||null==b.return||b.return();case 32:if(e.prev=32,!f){e.next=35;break}throw d;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return e.abrupt("return",h);case 40:throw e.prev=40,e.t1=e.catch(0),new Error("Failed to acquire games: ".concat(e.t1));case 43:case"end":return e.stop()}},e,null,[[0,40],[12,25,29,37],[30,,32,36]])}))).apply(this,arguments)}function l(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark(function e(t,n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o(s+i(t,n,r)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.default={GetGames:function(e,t,n){return p.apply(this,arguments)}}},375:function(e,t){},376:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),c=n(153),s=n.n(c),i=n(154),u=n(155),o=n(158),p=n(156),l=n(35),h=n(157),m=n(16),f=n.n(m),d=n(27),b=n(50),v="https://www.bungie.net/Platform/",y=function(e){return"/Destiny2/SearchDestinyPlayer/-1/".concat(e,"/")},w=function(e,t){return"/Destiny2/".concat(t,"/Profile/").concat(e,"/?components=100")},k=function(e,t,n){return"/Destiny2/".concat(t,"/Account/").concat(e,"/Character/").concat(n,"/Stats/?modes=64")};n(374),n(375);function E(e,t){this.membershipId=e,this.membershipType=t}function S(){return(S=Object(d.a)(f.a.mark(function e(t){var n,r,a,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t);case 3:return n=e.sent,r=new E(n.membershipId,n.membershipType),e.next=7,O(r.membershipId,r.membershipType);case 7:return a=e.sent,c=a.map(function(e){return j(r.membershipId,r.membershipType,e)}),e.next=11,Promise.all(c);case 11:return c=e.sent,r.characters=a,r.stats=c.map(function(e){return e.Response.allPvECompetitive.allTime}),e.abrupt("return",r);case 17:throw e.prev=17,e.t0=e.catch(0),console.error(e.t0),e.t0;case 21:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function x(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.SendRequest)(v+y(t));case 3:return n=e.sent,e.abrupt("return",{membershipId:n.Response[0].membershipId,membershipType:n.Response[0].membershipType});case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch membership data: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function O(e,t){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(f.a.mark(function e(t,n){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.SendRequest)(v+w(t,n));case 3:return r=e.sent,e.abrupt("return",r.Response.profile.data.characterIds);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch profile: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function j(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(f.a.mark(function e(t,n,r){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",Object(b.SendRequest)(v+k(t,n,r)));case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Could not get historical stats: ".concat(e.t0));case 7:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}var P=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={username:"",membershipId:"",membershipType:"",characters:[],historicalStats:[]},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.handleManifestClick=n.handleManifestClick.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return S.apply(this,arguments)}(this.state.username).then(function(e){t.setState({membershipId:e.membershipId,membershipType:e.membershipType,characters:e.characters,historicalStats:e.stats})}).catch(function(e){alert("Failed with response: ".concat(e))})}},{key:"handleManifestClick",value:function(e){e.preventDefault(),alert("clicked button")}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),a.a.createElement("button",{type:"submit"},"Send name")),a.a.createElement("button",{onClick:this.handleManifestClick},"Get Manifest"),a.a.createElement("div",null,"Membership id: ",a.a.createElement("span",null,this.state.membershipId)),a.a.createElement("div",null,"Membership type: ",a.a.createElement("span",null,this.state.membershipType)),this.state.characters.length>0&&a.a.createElement("ul",null,this.state.characters.map(function(e){return a.a.createElement("li",{key:e.id},e.id)})),this.state.historicalStats.length>0&&a.a.createElement("div",null,this.state.historicalStats.map(function(t,n){return a.a.createElement("ul",{key:e.state.characters[n].id},Object.keys(t).map(function(e){return a.a.createElement("li",null,e,": ",t[e].basic.displayValue)}))})))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,n){"use strict";n.r(t),n.d(t,"SendRequest",function(){return c});var r=n(165),a=n(373).BUNGIEAPIKEY;function c(e){return new Promise(function(t,n){var c={url:e,headers:{"X-Api-Key":a}};r.get(c,function(e,r,a){e&&n(e),200!==r.statusCode&&n("Could not resolve connection in time"),t(JSON.parse(a))})})}}},[[159,1,2]]]);
//# sourceMappingURL=main.af516ae5.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,n){e.exports=n(378)},165:function(e,t,n){"use strict";n.r(t),function(e){var t=n(16),r=n.n(t),a=n(27),c="https://www.bungie.net/Platform/",s=function(e){return"/Destiny2/SearchDestinyPlayer/-1/".concat(e,"/")},i=function(e,t){return"/Destiny2/".concat(t,"/Profile/").concat(e,"/?components=100")},u=function(e,t,n){return"/Destiny2/".concat(t,"/Account/").concat(e,"/Character/").concat(n,"/Stats/?modes=64")},o=(n(167),n(377),n(88).SendRequest);function p(e,t){this.membershipId=e,this.membershipType=t}function l(){return(l=Object(a.a)(r.a.mark(function e(t){var n,a,c,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t);case 3:return n=e.sent,a=new p(n.membershipId,n.membershipType),e.next=7,f(a.membershipId,a.membershipType);case 7:return c=e.sent,s=c.map(function(e){return b(a.membershipId,a.membershipType,e)}),e.next=11,Promise.all(s);case 11:return s=e.sent,a.characters=c,a.stats=s.map(function(e){return e.Response.allPvECompetitive.allTime}),e.abrupt("return",a);case 17:throw e.prev=17,e.t0=e.catch(0),console.error(e.t0),e.t0;case 21:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(c+s(t));case 3:return n=e.sent,e.abrupt("return",{membershipId:n.Response[0].membershipId,membershipType:n.Response[0].membershipType});case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch membership data: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function f(e,t){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(c+i(t,n));case 3:return a=e.sent,e.abrupt("return",a.Response.profile.data.characterIds);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch profile: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(r.a.mark(function e(t,n,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",o(c+u(t,n,a)));case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Could not get historical stats: ".concat(e.t0));case 7:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}e.exports={main:function(e){return l.apply(this,arguments)}}}.call(this,n(87)(e))},167:function(e,t,n){"use strict";n.r(t),function(e){var t=n(16),r=n.n(t),a=n(27),c="https://www.bungie.net/Platform/",s=function(e,t,n){return"/Destiny2/".concat(t,"/Account/").concat(e,"/Character/").concat(n,"/Stats/Activities/?mode=64")},i=function(e){return"/Destiny2/Stats/PostGameCarnageReport/".concat(e,"/")},u=n(88).SendRequest;function o(){return(o=Object(a.a)(r.a.mark(function e(t,n,a){var s,o,l,h,m,f,d,b,v,y,w;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=a.map(function(e){return p(t,n,e)}),e.next=4,Promise.all(s);case 4:s=e.sent,o=s.map(function(e){return e.Response.activities.map(function(e){return e.activityDetails.instanceId})}),l=o.map(function(e){return e.map(function(e){return u(c+i(e))})}),h=[],m=!0,f=!1,d=void 0,e.prev=12,b=l[Symbol.iterator]();case 14:if(m=(v=b.next()).done){e.next=23;break}return y=v.value,e.next=18,Promise.all(y);case 18:w=e.sent,h.push(w.map(function(e){return e.Response}));case 20:m=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),f=!0,d=e.t0;case 29:e.prev=29,e.prev=30,m||null==b.return||b.return();case 32:if(e.prev=32,!f){e.next=35;break}throw d;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return e.abrupt("return",h);case 40:throw e.prev=40,e.t1=e.catch(0),new Error("Failed to acquire games: ".concat(e.t1));case 43:case"end":return e.stop()}},e,null,[[0,40],[12,25,29,37],[30,,32,36]])}))).apply(this,arguments)}function p(e,t,n){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(r.a.mark(function e(t,n,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(c+s(t,n,a)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}e.exports={GetGames:function(e,t,n){return o.apply(this,arguments)}}}.call(this,n(87)(e))},182:function(e,t){},184:function(e,t){},216:function(e,t){},217:function(e,t){},286:function(e,t){},376:function(e,t){(e.exports={}).BUNGIEAPIKEY="7771c372dbe34060a7bbb10b3016ecfe"},377:function(e,t){},378:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),c=n(154),s=n.n(c),i=n(155),u=n(156),o=n(158),p=n(157),l=n(35),h=n(159),m=n(165).main,f=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={username:"",membershipId:"",membershipType:"",characters:[],historicalStats:[]},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.handleManifestClick=n.handleManifestClick.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),m(this.state.username).then(function(e){t.setState({membershipId:e.membershipId,membershipType:e.membershipType,characters:e.characters,historicalStats:e.stats})}).catch(function(e){alert("Failed with response: ".concat(e))})}},{key:"handleManifestClick",value:function(e){e.preventDefault(),alert("clicked button")}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),a.a.createElement("button",{type:"submit"},"Send name")),a.a.createElement("button",{onClick:this.handleManifestClick},"Get Manifest"),a.a.createElement("div",null,"Membership id: ",a.a.createElement("span",null,this.state.membershipId)),a.a.createElement("div",null,"Membership type: ",a.a.createElement("span",null,this.state.membershipType)),this.state.characters.length>0&&a.a.createElement("ul",null,this.state.characters.map(function(e){return a.a.createElement("li",{key:e.id},e.id)})),this.state.historicalStats.length>0&&a.a.createElement("div",null,this.state.historicalStats.map(function(t,n){return a.a.createElement("ul",{key:e.state.characters[n].id},Object.keys(t).map(function(e){return a.a.createElement("li",null,e,": ",t[e].basic.displayValue)}))})))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,t,n){var r=n(168),a=n(376).BUNGIEAPIKEY;e.exports={SendRequest:function(e){return new Promise(function(t,n){var c={url:e,headers:{"X-Api-Key":a}};r.get(c,function(e,r,a){e&&n(e),200!==r.statusCode&&n("Could not resolve connection in time"),t(JSON.parse(a))})})}}}},[[160,1,2]]]);
//# sourceMappingURL=main.4e2e832a.chunk.js.map
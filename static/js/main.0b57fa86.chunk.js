(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){var r=n(108),a=n(506).BUNGIEAPIKEY;e.exports={SendRequest:function(e){return new Promise(function(t,n){var i={url:e,headers:{"X-Api-Key":a}};r.get(i,function(e,r,a){e&&n(e),200!==r.statusCode&&n("Could not resolve connection in time"),t(JSON.parse(a))})})}}},155:function(e,t){},252:function(e,t,n){var r={"./build":253,"./build.js":253,"./clean":254,"./clean.js":254,"./configure":147,"./configure.js":147,"./info":255,"./info.js":255,"./install":273,"./install.js":273,"./node-pre-gyp":139,"./node-pre-gyp.js":139,"./package":282,"./package.js":282,"./pre-binding":145,"./pre-binding.js":145,"./publish":283,"./publish.js":283,"./rebuild":284,"./rebuild.js":284,"./reinstall":285,"./reinstall.js":285,"./reveal":286,"./reveal.js":286,"./testbinary":164,"./testbinary.js":164,"./testpackage":287,"./testpackage.js":287,"./unpublish":288,"./unpublish.js":288,"./util/abi_crosswalk":146,"./util/abi_crosswalk.json":146,"./util/compile":98,"./util/compile.js":98,"./util/handle_gyp_opts":99,"./util/handle_gyp_opts.js":99,"./util/napi":20,"./util/napi.js":20,"./util/nw-pre-gyp/index.html":967,"./util/nw-pre-gyp/package":289,"./util/nw-pre-gyp/package.json":289,"./util/s3_setup":77,"./util/s3_setup.js":77,"./util/versioning":31,"./util/versioning.js":31};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=252},296:function(e,t,n){e.exports=n(971)},301:function(e,t,n){"use strict";n.r(t),function(e){var t=n(16),r=n.n(t),a=n(35),i="https://www.bungie.net/Platform/",s=function(e){return"/Destiny2/SearchDestinyPlayer/-1/".concat(e,"/")},c=function(e,t){return"/Destiny2/".concat(t,"/Profile/").concat(e,"/?components=100")},o=function(e,t,n){return"/Destiny2/".concat(t,"/Account/").concat(e,"/Character/").concat(n,"/Stats/?modes=64")},u=(n(303),n(507),n(107).SendRequest);function p(e,t){this.membershipId=e,this.membershipType=t}function l(){return(l=Object(a.a)(r.a.mark(function e(t){var n,a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t);case 3:return n=e.sent,a=new p(n.membershipId,n.membershipType),e.next=7,m(a.membershipId,a.membershipType);case 7:return i=e.sent,s=i.map(function(e){return b(a.membershipId,a.membershipType,e)}),e.next=11,Promise.all(s);case 11:return s=e.sent,a.characters=i,a.stats=s.map(function(e){return e.Response.allPvECompetitive.allTime}),e.abrupt("return",a);case 17:throw e.prev=17,e.t0=e.catch(0),console.error(e.t0),e.t0;case 21:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(i+s(t));case 3:return n=e.sent,e.abrupt("return",{membershipId:n.Response[0].membershipId,membershipType:n.Response[0].membershipType});case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch membership data: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function m(e,t){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(i+c(t,n));case 3:return a=e.sent,e.abrupt("return",a.Response.profile.data.characterIds);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not fetch profile: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(r.a.mark(function e(t,n,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",u(i+o(t,n,a)));case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Could not get historical stats: ".concat(e.t0));case 7:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}e.exports={main:function(e){return l.apply(this,arguments)}}}.call(this,n(106)(e))},303:function(e,t,n){"use strict";n.r(t),function(e){var t=n(16),r=n.n(t),a=n(35),i="https://www.bungie.net/Platform/",s=function(e,t,n){return"/Destiny2/".concat(t,"/Account/").concat(e,"/Character/").concat(n,"/Stats/Activities/?mode=64")},c=function(e){return"/Destiny2/Stats/PostGameCarnageReport/".concat(e,"/")},o=n(107).SendRequest;function u(){return(u=Object(a.a)(r.a.mark(function e(t,n,a){var s,u,l,h,f,m,d,b,v,w,y;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=a.map(function(e){return p(t,n,e)}),e.next=4,Promise.all(s);case 4:s=e.sent,u=s.map(function(e){return e.Response.activities.map(function(e){return e.activityDetails.instanceId})}),l=u.map(function(e){return e.map(function(e){return o(i+c(e))})}),h=[],f=!0,m=!1,d=void 0,e.prev=12,b=l[Symbol.iterator]();case 14:if(f=(v=b.next()).done){e.next=23;break}return w=v.value,e.next=18,Promise.all(w);case 18:y=e.sent,h.push(y.map(function(e){return e.Response}));case 20:f=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),m=!0,d=e.t0;case 29:e.prev=29,e.prev=30,f||null==b.return||b.return();case 32:if(e.prev=32,!m){e.next=35;break}throw d;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return e.abrupt("return",h);case 40:throw e.prev=40,e.t1=e.catch(0),new Error("Failed to acquire games: ".concat(e.t1));case 43:case"end":return e.stop()}},e,null,[[0,40],[12,25,29,37],[30,,32,36]])}))).apply(this,arguments)}function p(e,t,n){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(r.a.mark(function e(t,n,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o(i+s(t,n,a)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}e.exports={GetGames:function(e,t,n){return u.apply(this,arguments)}}}.call(this,n(106)(e))},316:function(e,t){},318:function(e,t){},350:function(e,t){},351:function(e,t){},419:function(e,t){},506:function(e,t){(e.exports={}).BUNGIEAPIKEY="7771c372dbe34060a7bbb10b3016ecfe"},507:function(e,t,n){"use strict";n.r(t),function(e,t){var r=n(16),a=n.n(r),i=n(35),s=n(108),c=n(4),o=n(508),u=n(6),p=n(534).verbose(),l=n(107).SendRequest();new p.Database("./db.sqlite3");function h(){return(h=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=l("http://www.bungie.net/Platform/Destiny2/Manifest/"),e.next=4,f("https://www.bungie.net/"+t.Response.mobileWorldContentPaths.en);case 4:return e.abrupt("return");case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to fetch manifest: ".concat(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function f(t){return new Promise(function(){var n=Object(i.a)(a.a.mark(function n(r,i){var p,l;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s(t).pipe(o.Extract({path:e})).promise();case 2:for(l in p=c.readdirSync(e))".content"===u.extname(p[l])&&c.rename(p[l],"db.sqlite3",function(e){e&&console.log("ERROR: "+e)});r();case 5:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}t.exports={GetManifest:function(){return h.apply(this,arguments)}}}.call(this,"/",n(106)(e))},570:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=570},571:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=571},948:function(e,t){},949:function(e,t){},969:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=969},971:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),i=n(290),s=n.n(i),c=n(291),o=n(292),u=n(294),p=n(293),l=n(59),h=n(295),f=n(301).main,m=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={username:"",membershipId:"",membershipType:"",characters:[],historicalStats:[]},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.handleManifestClick=n.handleManifestClick.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),f(this.state.username).then(function(e){t.setState({membershipId:e.membershipId,membershipType:e.membershipType,characters:e.characters,historicalStats:e.stats})}).catch(function(e){alert("Failed with response: ".concat(e))})}},{key:"handleManifestClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),a.a.createElement("button",{type:"submit"},"Send name")),a.a.createElement("button",{onClick:this.handleManifestClick},"Get Manifest"),a.a.createElement("div",null,"Membership id: ",a.a.createElement("span",null,this.state.membershipId)),a.a.createElement("div",null,"Membership type: ",a.a.createElement("span",null,this.state.membershipType)),this.state.characters.length>0&&a.a.createElement("ul",null,this.state.characters.map(function(e){return a.a.createElement("li",{key:e.id},e.id)})),this.state.historicalStats.length>0&&a.a.createElement("div",null,this.state.historicalStats.map(function(t,n){return a.a.createElement("ul",{key:e.state.characters[n].id},Object.keys(t).map(function(e){return a.a.createElement("li",null,e,": ",t[e].basic.displayValue)}))})))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[296,1,2]]]);
//# sourceMappingURL=main.0b57fa86.chunk.js.map